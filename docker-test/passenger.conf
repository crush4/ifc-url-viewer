server {
    listen 80;
    server_name localhost;
    
    # Root directory for static files
    root /home/app/webapp/dist;
    
    # Enable Passenger
    passenger_enabled on;
    passenger_app_type node;
    passenger_startup_file server.js;
    
    # Set environment
    passenger_env_var NODE_ENV production;
    
    # Handle SPA routing
    location / {
        try_files $uri $uri/ /index.html;
    }

    # Proper MIME types for JavaScript modules
    location ~ \.js$ {
        add_header Content-Type application/javascript;
    }

    location ~ \.css$ {
        add_header Content-Type text/css;
    }
} 